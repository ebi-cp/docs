## 普通に学ぶPython3 リスト

リストについて  
全部覚える必要ないし使っていれば自然に身につくだろうけど覚えておいても損はないと思う  

リストは連続したデータ[1, 1, 1, 1, 1]こんな奴  
追加したり順番にアクセスしたりできる  

#### リストの要素を追加する
```python
a = [1, 2, 3]
a += [4]
a.append(5)
print(a)    # [1, 2, 3, 4, 5]
```
#### リスト同士を足したりできる
```python
a = [1, 2, 3, 4, 5]
a = a + a
print(a)    # [1, 2, 3, 4, 5, 1, 2, 3, 4, 5]
```
#### リストを掛けたりできる
```python
a = [1, 2, 3, 4, 5]
a = a * 2
print(a)    # [1, 2, 3, 4, 5, 1, 2, 3, 4, 5]
```
#### for文で順番にアクセス
```python
a = [1, 2, 3, 4, 5]
for i in a:
    print(i)
# 1
# 2
# 3
# 4
# 5
```
#### 長さを求めるlen
```python
a = [1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5]
print(len(a))    # 20
```
#### 順番に並べ替える
```python
a = [5, 1, 2, 6]
a.sort()
print(a)    # [1, 2, 5, 6]
```
#### 順番に並べ替えたリストを新しく作る
```python
a = [5, 1, 2, 6]
b = sorted(a)
print(b, a)    # [1, 2, 5, 6] [5, 1, 2, 6]
```
#### 条件に合った数のみのリストを作る x >= 5
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
b = [x for x in a if x >= 5]
print(b)    # [5, 6, 7, 8, 9]

c = list(filter(lambda x : x >= 5, a))    # filterオブジェクトになるのでlistにする
print(c)    # [5, 6, 7, 8, 9]
```
#### 条件に合った数のみのリストを作る x >= 5 さらに 2倍する
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

b = [x*2 for x in a if x >= 5]
print(b)    # [10, 12, 14, 16, 18]

c = list(map(lambda x : x*2, filter(lambda x : x >= 5, a)))
print(c)    # [10, 12, 14, 16, 18]
```
#### リスト内法表記
```python
a = [x for x in range(10)]    # 0~9までrange関数で生成され順番にxに入ります
a = [x*2 for x in range(10)]    # 2倍したり
a = [input() for x in range(10)]    # 10回入力を受け取ったり
a = [input()for x in[0]*10]    # 上と同じこの場合xは使わないので適当な値で良い。コードゴルフ用
a = [x for x in range(10) if x >= 5]    # filterの様な事もでます

a = []    # リスト内法表記はリストに追加していくよりも早いです
for x in range(10):
    a.append(x)
```
---
## スライス
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
b1 = a[1:]
b2 = a[2:]
print(b1)    # [1, 2, 3, 4, 5, 6, 7, 8, 9]
print(b2)    # [2, 3, 4, 5, 6, 7, 8, 9]
c1 = a[:5]
c2 = a[:6]
print(c1)    # [0, 1, 2, 3, 4]
print(c2)    # [0, 1, 2, 3, 4, 5]
d1 = a[1:5]
d2 = a[2:6]
print(d1)    # [1, 2, 3, 4]
print(d2)    # [2, 3, 4, 5]
e1 = a[:-1]
e2 = a[:-2]
print(e1)    # [0, 1, 2, 3, 4, 5, 6, 7, 8]
print(e2)    # [0, 1, 2, 3, 4, 5, 6, 7]
```
#### スライス nつ置きに
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
b1 = a[::2]
b2 = a[::3]
print(b1)    # [0, 2, 4, 6, 8]
print(b2)    # [0, 3, 6, 9]
```
#### スライス 逆順
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
b = a[::-1]
print(b)    # [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
```
---
## リストのコピー
#### ダメな例
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
b = a
a[0] = 5126
print(b)    # [5126, 1, 2, 3, 4, 5, 6, 7, 8, 9]
print(a)    # [5126, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```
#### スライスによるコピー
```python
a = list(range(10))    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
b = a[:]
a[0] = 5126
print(b)    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
print(a)    # [5126, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

#### 関数の引数に渡してもコピーではなく参照なので関数内で値を変更すると元のリストが変更されてしまう 例
```python
def f(v) : v[0] = 5126
a = list(range(10))
f(a)
print(a)    # [5126, 1, 2, 3, 4, 5, 6, 7, 8, 9]
# コピーがほしい場合は関数内でしっかりコピーしましょう t = v[:]
```
---
## 2次元リスト
#### X(4) * Y(2)のリストを作る 全て0で初期化
```python
a = [[0 for y in range(2)] for x in range(4)]
print(a)    # [[0, 0], [0, 0], [0, 0], [0, 0]]
a[3][1] = 5126
print(a)    # [[0, 0], [0, 0], [0, 0], [0, 5126]]
```
---
## 2次元リストのコピー
#### ダメな例 浅いコピーになってしまいaの変更がbに影響を与えています
```python
a = [[0, 1], [2, 3], [4, 5], [6, 7]]
b = a[:]
a[3][1] = 5126
print(b)    # [[0, 1], [2, 3], [4, 5], [6, 5126]]
```
#### リスト内表記でコピー1
```python
a = [[0, 1], [2, 3], [4, 5], [6, 7]]
b = [x[:] for x in a]
a[3][1] = 5126
print(b)    # [[0, 1], [2, 3], [4, 5], [6, 7]]
```
#### リスト内表記でコピー2
```python
a = [[0, 1], [2, 3], [4, 5], [6, 7]]
b = [[y for y in x] for x in a]
a[3][1] = 5126
print(b)    # [[0, 1], [2, 3], [4, 5], [6, 7]]
```
#### deepcopyでコピー
```python
import copy
a = [[0, 1], [2, 3], [4, 5], [6, 7]]
b = copy.deepcopy(a)
a[3][1] = 5126
print(b)    # [[0, 1], [2, 3], [4, 5], [6, 7]]
```
---
## イテラブル、イテレータ
- map(関数, イテラブルオブジェクト) 戻り値がイテレータオブジェクト
- filter(関数, イテラブルオブジェクト) 戻り値がイテレータオブジェクト
- イテラブルは__iter__を持つオブジェクト
- イテレータは__iter__と__next__を持つオブジェクト
- イテレータはnext(イテレータオブジェクト)で順にアクセスができる
- イテラブル、イテレータはfor文で使える
- map, filter (Python2ではリストを返す)

- rangeもイテラブルオブジェクト
- リストはイテラブルオブジェクトでランダムアクセスもできる(リストだからできるイテラブルだから出来ると言うわけではない)
- list(イテラブルオブジェクト)でリスト化することができる
- イテレータオブジェクトは__iter__も持っているのでイテラブルオブジェクトを引数にとる関数の引数に使えるmapにmapオブジェクトを渡したりだとかlistにmapオブジェクト渡したりだとか
- iter(イテラブルオブジェクト)でイテレータオブジェクト化できる